"use strict";(self.webpackChunktestkube_documentation=self.webpackChunktestkube_documentation||[]).push([[5766],{3905:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>d});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=r.createContext({}),u=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},l=function(e){var t=u(e.components);return r.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),m=u(n),d=o,b=m["".concat(c,".").concat(d)]||m[d]||p[d]||a;return n?r.createElement(b,s(s({ref:t},l),{},{components:n})):r.createElement(b,s({ref:t},l))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,s=new Array(a);s[0]=m;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:o,s[1]=i;for(var u=2;u<a;u++)s[u]=n[u];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},6028:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>p,frontMatter:()=>a,metadata:()=>i,toc:()=>u});var r=n(7462),o=(n(7294),n(3905));const a={sidebar_position:11,sidebar_label:"Container Executor"},s="What is a Container Executor?",i={unversionedId:"test-types/container-executor",id:"test-types/container-executor",title:"What is a Container Executor?",description:"The TestKube Container Executor allows you to run your own container images for executing tests. TestKube orchestrates the Tests using the container image as Kubernetes Jobs.",source:"@site/docs/4-test-types/container-executor.md",sourceDirName:"4-test-types",slug:"/test-types/container-executor",permalink:"/testkube/test-types/container-executor",draft:!1,editUrl:"https://github.com/kubeshop/testkube/docs/docs/4-test-types/container-executor.md",tags:[],version:"current",sidebarPosition:11,frontMatter:{sidebar_position:11,sidebar_label:"Container Executor"},sidebar:"tutorialSidebar",previous:{title:"cURL",permalink:"/testkube/test-types/executor-curl"},next:{title:"Creating New Test Types",permalink:"/testkube/test-types/executor-custom"}},c={},u=[],l={toc:u};function p(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"what-is-a-container-executor"},"What is a Container Executor?"),(0,o.kt)("p",null,"The TestKube Container Executor allows you to run your own container images for executing tests. TestKube orchestrates the Tests using the container image as Kubernetes Jobs."),(0,o.kt)("p",null,"The Test execution fails if the container exits with an error and succeeds when the container command successfully executes."),(0,o.kt)("p",null,"In order to use the Container Executor, create a new executor with ",(0,o.kt)("inlineCode",{parentName:"p"},"executor_type: container")," and your custom type. For example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'apiVersion: executor.testkube.io/v1\nkind: Executor\nmetadata:\n  name: curl-container-executor\n  namespace: testkube\nspec:\n  image: curlimages/curl:7.85.0\n  command: ["curl"]\n  executor_type: container\n  imagePullSecrets:\n    - name: secret-name\n  types:\n  - curl-container/test\n')),(0,o.kt)("p",null,"In the above example, all Tests of ",(0,o.kt)("inlineCode",{parentName:"p"},"curl-container/test")," will be executed by this Executor. Then you can create a new test that uses this Executor:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"apiVersion: tests.testkube.io/v3\nkind: Test\nmetadata:\n  name: test-website\n  namespace: testkube\nspec:\n  type: curl-container/test\n  executionRequest:\n    args:\n    - https://testkube.kubeshop.io/\n    envs:\n      TESTKUBE_ENV: example\n")),(0,o.kt)("p",null,"Executing this test will run a Kubernetes Job with a ",(0,o.kt)("inlineCode",{parentName:"p"},"curlimages/curl:7.85.0")," image, ",(0,o.kt)("inlineCode",{parentName:"p"},"secret-name")," image pull secret, ",(0,o.kt)("inlineCode",{parentName:"p"},"curl")," command, and ",(0,o.kt)("inlineCode",{parentName:"p"},"https://testkube.kubeshop.io/")," argument."),(0,o.kt)("p",null,"You can provide image, args, command, and image pull secrets in the HTTP Request, Test Spec, and Executor spec. The container executor merges all the data using the following order:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"HTTP Request."),(0,o.kt)("li",{parentName:"ol"},"Test.Spec.ExecutionRequest fields are used if they are not filled before."),(0,o.kt)("li",{parentName:"ol"},"Executor.Spec fields are used if they are not filled before.")))}p.isMDXComponent=!0}}]);